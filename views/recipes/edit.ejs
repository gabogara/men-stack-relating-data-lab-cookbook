<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Edit <%= recipe.name %></title>
  </head>
  <body>
    <%- include('../partials/_navbar.ejs') %>

    <h1>Edit <%= recipe.name %></h1>

    <form action="/recipes/<%= recipe._id %>?_method=PUT" method="POST">
      <label>Name</label>
      <input name="name" value="<%= recipe.name %>" required />

      <label>Instructions</label>
      <textarea name="instructions"><%= recipe.instructions %></textarea>

      <h3>Ingredients</h3>

      <% if (ingredients.length === 0) { %>
      <p>
        No ingredients available.
        <a href="/ingredients" target="_blank">Add some</a>
      </p>
      <% } else { %> <% ingredients.forEach(ing => { %>
      <label>
        <input type="checkbox" name="ingredients" value="<%= ing._id %>" <%=
        selectedIngredientIds.includes(ing._id.toString()) ? "checked" : "" %>
        /> <%= ing.name %>
      </label>
      <br />
      <% }) %> <% } %>

      <button type="submit">Update Recipe</button>
    </form>

    <a href="/recipes/<%= recipe._id %>">Cancel</a>
  </body>
</html>
